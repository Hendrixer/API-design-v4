{"pageProps":{"post":{"attributes":{},"html":"<p>We can overwrite the default handler with our own custom one.</p>\n<pre><code class=\"hljs language-ts\">app.<span class=\"hljs-title function_\">use</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">err, req, res, next</span>) =&gt;</span> {\n  <span class=\"hljs-keyword\">if</span> (err.<span class=\"hljs-property\">type</span> === <span class=\"hljs-string\">&quot;auth&quot;</span>) {\n    res.<span class=\"hljs-title function_\">status</span>(<span class=\"hljs-number\">401</span>);\n    res.<span class=\"hljs-title function_\">json</span>({ <span class=\"hljs-attr\">message</span>: <span class=\"hljs-string\">&quot;nope&quot;</span> });\n  }\n});\n</code></pre>\n<p>This is an example of what a custom error handler might look like. If you use any error reporting service to capture and analyze errors, here is where you want to report your errors. We can even have many custom handlers all doing different things. For example, one might log the error, then another reports it to your reporting service, and the last one actually responds to the request.\n<br>\nWe can augment an error however we see fit before passing it to <code>next</code>. This will help our custom handler decide on how to handle the actuall error.</p>\n<pre><code class=\"hljs language-ts\"><span class=\"hljs-keyword\">catch</span> (e) {\n  e.<span class=\"hljs-property\">type</span> = <span class=\"hljs-string\">&#x27;input&#x27;</span>\n  <span class=\"hljs-title function_\">next</span>(e)\n}\n\napp.<span class=\"hljs-title function_\">use</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">err, req, res, next</span>) =&gt;</span> {\n  <span class=\"hljs-keyword\">if</span> (err.<span class=\"hljs-property\">type</span> === <span class=\"hljs-string\">&#x27;input&#x27;</span>) {\n    res.<span class=\"hljs-title function_\">status</span>(<span class=\"hljs-number\">400</span>)\n    <span class=\"hljs-keyword\">return</span> res.<span class=\"hljs-title function_\">send</span>(<span class=\"hljs-string\">&#x27;invalid input&#x27;</span>)\n  }\n})\n</code></pre>\n<h2 id=\"handle-our-errors\">Handle our errors</h2>\n<p>Next, lets go through our handlers and middleware and make sure we&#39;re handling our errors. Also, we must create our own error handler for the app.</p>\n","slug":"custom-handler","title":"Custom Handler","section":"Error Handlers","icon":"times","filePath":"/home/runner/work/API-design-v4/API-design-v4/lessons/09-error-handlers/B-custom-handler.md","nextSlug":"/API-design-v4/lessons/global-config/env-and-stage","prevSlug":"/API-design-v4/lessons/error-handlers/error-handler"}},"__N_SSG":true}